(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n.p+"static/media/logo2.83329474.svg"},33:function(e,t,n){e.exports=n(54)},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),c=n.n(o),i=n(10),s=n(15),u=n(32),l="POSTS_DATA_REQUESTED";var m="POSTS_DATA_SUCCEEDED";function d(e){return{type:m,data:e}}var p="POSTS_DATA_FAILED";var f="COMMENTS_DATA_REQUESTED";var h="COMMENTS_DATA_SUCCEEDED";var b="COMMENTS_DATA_FAILED";var v="SAVE_COMMENT_DATA";var g="ADD_TO_FAVORITES";var E="REMOVE_FROM_FAVORITES";var y="SORT_POSTS_BY_PARAM";var O="FILTER_POSTS";var j=n(12),k=["Jan Kowalski","Tomasz Nowak","Janusz Gajos","Ryszard Rynkowski","Adam Mickiewicz","Jan Kochanowski","Zbigniew Zamachowski","Antonio Banderas","Marek Perepeczko","Ryszard Kownacki"],C=Object(j.b)({posts:{loading:!1,list:[],filters:[]},comments:{loading:!1,list:[]},currentPostId:0});var S=n(13),w=n.n(S),P=n(11),I=n(31);function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Object.assign({},n),o={method:t,headers:a};return"GET"!==t&&(o.body=JSON.stringify(r),o.headers["Content-Type"]="application/json"),fetch(e,o).then(function(e){return Promise.all([e.json(),e]).catch(function(){return Promise.all([{},e])})}).then(function(e){var t=Object(I.a)(e,2),n=t[0],a=t[1];if(401===a.status)throw new Error(a.status);if(423===a.status)throw new Error("423");if(!a.ok||!n)throw new Error("Error code - ".concat(a.status));if(a.ok)return n;throw new Error("Error code - ".concat(a.status))})}("https://jsonplaceholder.typicode.com"+e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",t)}var T=w.a.mark(B),N=w.a.mark(_),A=w.a.mark(M),F=w.a.mark(R),x=w.a.mark(z);function B(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(P.b)(D,"/posts");case 3:return e=t.sent,t.next=6,Object(P.d)(d(e));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.next=13,Object(P.d)((n=t.t0,{type:p,e:n}));case 13:case"end":return t.stop()}var n},T,null,[[0,8]])}function _(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.e)(l,B);case 2:case"end":return e.stop()}},N)}function M(e){var t,n;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.prev=1,a.next=4,Object(P.b)(D,"/comments?postId=".concat(t));case 4:return n=a.sent,a.next=7,Object(P.d)({type:h,data:n});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(1),console.error(a.t0),a.next=14,Object(P.d)((r=a.t0,{type:b,e:r}));case 14:case"end":return a.stop()}var r},A,null,[[1,9]])}function R(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.e)(f,M);case 2:case"end":return e.stop()}},F)}function z(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.a)([Object(P.c)(_),Object(P.c)(R)]);case 2:case"end":return e.stop()}},x)}var L=s.c;var q=Object(u.a)(),J=[q],H=Object(s.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l:return e.setIn(["isFetching"],!0);case m:return e.setIn(["posts","list"],Object(j.b)(t.data).update(function(e){return e.map(function(e){return e.set("author",k[e.get("userId")-1]).set("favorite",!1)})}));case p:return e.setIn(["posts","loading"],!1);case f:return e.setIn(["currentPostId"],Object(j.b)(t.id)).setIn(["comments","loading"],!0);case h:return e.setIn(["comments","list"],Object(j.c)(e.getIn(["comments","list"]),Object(j.b)(t.data)).toOrderedSet().toList()).setIn(["comments","loading"],!1);case b:return e.setIn(["comments","loading"],!1);case v:return e.setIn(["comments","list"],e.getIn(["comments","list"]).merge(Object(j.b)(t.data)));case g:return e.updateIn(["posts","list"],function(e){var n=e.findIndex(function(e){return e.get("id")===t.id});return e.setIn([n,"favorite"],!0)});case E:return e.updateIn(["posts","list"],function(e){var n=e.findIndex(function(e){return e.get("id")===t.id});return e.setIn([n,"favorite"],!1)});case y:return e.updateIn(["posts","list"],function(e){return"asc"===t.order?e.sortBy(function(e){return e.get(t.orderBy)}):e.sortBy(function(e){return e.get(t.orderBy)}).reverse()});case O:return e.setIn(["posts","filters"],Object(j.b)(t.filters));default:return e}},L(s.a.apply(void 0,J)));q.run(z);var U=H,G=(n(43),n(44),n(45),n(30)),V=n.n(G),K=function(){return r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:V.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",null,"Post Box"))},Q=n(16),Z=n(5),W=n(6),Y=n(8),X=n(7),$=n(9),ee=function(e){var t=e.data;return r.a.createElement("li",{className:"comment"},t.body.split("\n").map(function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))}))},te=n(25),ne=Object(te.a)(function(e){var t=e.get("posts"),n=e.getIn(["posts","filters"]);return t.updateIn(["list"],function(e){return e.filter(function(e){return n.every(function(t){return String(e.get(t.get("key"))).toLocaleLowerCase().includes(String(t.getIn(["value",t.get("value").indexOf(String(e.get(t.get("key"))))])).toLocaleLowerCase())})})})},function(e){return e.toJS()}),ae=Object(te.a)(function(e){return e.get("comments")},function(e){return e.toJS()}),re=function(e){return e.get("currentPostId")};n(46);var oe=function(e){function t(){var e,n;Object(Z.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={formData:{id:0,postId:0,name:"",email:"",body:""}},n.handleSubmit=function(e){e.preventDefault(),n.setState(function(e){return Object(Q.a)({},e,{formData:Object(Q.a)({},e.formData,{postId:n.props.postId,id:(t=2e3,Math.round(Math.random()*t))})});var t},function(){n.props.saveCommentData([n.state.formData]),n.clearState()})},n.handleChange=function(e){var t=n.state.formData;t[e.target.name]=e.target.value,n.setState({formData:t})},n.clearState=function(){n.setState({formData:{id:0,postId:0,name:"",email:"",body:""}})},n}return Object($.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.state.formData,t=e.name,n=e.email,a=e.body;return r.a.createElement("div",{className:"CommentForm-container"},r.a.createElement("form",{className:"CommentForm-form",onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"name"},"Twoje imi\u0119:"),r.a.createElement("input",{type:"text",value:t,id:"name",name:"name",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"email"},"Tw\xf3j e-mail:"),r.a.createElement("input",{type:"text",value:n,id:"email",name:"email",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"body"},"Tw\xf3j komentarz:"),r.a.createElement("textarea",{id:"body",value:a,name:"body",onChange:this.handleChange,required:!0}),r.a.createElement("button",{type:"submit"},"Dodaj komentarz")))}}]),t}(r.a.Component),ce={saveCommentData:function(e){return{data:e,type:v}}},ie=Object(i.b)(function(e){return{}},ce)(oe),se=function(e){function t(){return Object(Z.a)(this,t),Object(Y.a)(this,Object(X.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.id;return r.a.createElement(r.a.Fragment,null,t.loading?r.a.createElement("p",null,"\u0141adowanie danych ..."):r.a.createElement("ul",null,t.list.filter(function(e){return e.postId===n}).map(function(e){return r.a.createElement(ee,{key:e.id,data:e})})),r.a.createElement(ie,{postId:n}))}}]),t}(r.a.Component),ue=Object(i.b)(function(e){return{data:ae(e),id:re(e)}},{})(se),le=function(e){function t(){var e,n;Object(Z.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).getComments=function(e){n.props.getCommentsDataRequested(e)},n.addRemoveFavorites=function(e){n.props.data.favorite?n.props.removeFromFavorites(e):n.props.addToFavorites(e)},n}return Object($.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.currentPostId;return r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("strong",null,n.title.split("\n").map(function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))}))),r.a.createElement("p",{className:"Post-body"},n.body.split("\n").map(function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))})),r.a.createElement("div",{className:"Post-buttons-container"},r.a.createElement("button",{onClick:function(){return e.getComments(n.id)},type:"button"},"Poka\u017c komentarze"),r.a.createElement("button",{onClick:function(){return e.addRemoveFavorites(n.id)},type:"link",className:n.favorite?"Post-favorite-button-remove":"Post-favorite-button-add"},n.favorite?"Usu\u0144 z ulubionych":"Dodaj do ulubionych")),a===n.id&&r.a.createElement(ue,{id:n.id}))}}]),t}(r.a.Component),me={getCommentsDataRequested:function(e){return{id:e,type:f}},addToFavorites:function(e){return{id:e,type:g}},removeFromFavorites:function(e){return{id:e,type:E}}},de=Object(i.b)(function(e){return{currentPostId:re(e)}},me)(le),pe=(n(47),n(48),function(e){for(var t=e.rowsPerPage,n=e.page,a=e.onChangePage,o=e.count,c=[],i=1;i<=Math.ceil(o/t);i++)c.push(i);return c.map(function(e){return r.a.createElement("li",{key:e,id:e,onClick:a,className:n===e?"Pagination-page-active":"Pagination-page"},e)})}),fe=(n(49),function(e){function t(){var e,n;Object(Z.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={filters:Object(j.a)(),search:""},n.onChangeHandler=function(e){var t=e.target.name,a=e.target.multiple?Array.from(e.target.selectedOptions,function(e){return e.value}):e.target.checked?[e.target.value]:[],r=e.target.checked||a.length>0,o=Object(j.b)({key:t,value:a});n.setState(function(e){return Object(Q.a)({},e,{filters:e.filters.update(function(e){return r?e.filterNot(function(e){return e.get("key")===t}).push(o):e.filterNot(function(e){return e.get("key")===t})})})})},n.onSearchInputHandler=function(e){var t=e.target.value;n.setState(function(e){return Object(Q.a)({},e,{search:t,filters:e.filters.update(function(e){return e.map(function(e){return"favorite"!==e.get("key")&&"author"!==e.get("key")?e.setIn(["value",0],t):e})})})})},n.handleSubmit=function(e){e.preventDefault(),n.props.filterPosts(n.state.filters.toJS())},n}return Object($.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Search-container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"Search-form-container"},r.a.createElement("div",null,r.a.createElement("select",{multiple:!0,name:"author",id:"author",onChange:this.onChangeHandler},k.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("div",{className:"Search-input-container"},r.a.createElement("label",{htmlFor:"titleFilter"},"Tytu\u0142"),r.a.createElement("input",{type:"checkbox",onChange:this.onChangeHandler,name:"title",id:"title",value:this.state.search})),r.a.createElement("div",{className:"Search-input-container"},r.a.createElement("label",{htmlFor:"bodyFilter"},"Tre\u015b\u0107"),r.a.createElement("input",{type:"checkbox",onChange:this.onChangeHandler,name:"body",id:"body",value:this.state.search})),r.a.createElement("div",{className:"Search-input-container"},r.a.createElement("label",{htmlFor:"favoritesFilter"},"Ulubione"),r.a.createElement("input",{type:"checkbox",onChange:this.onChangeHandler,name:"favorite",id:"favorite",value:"true"})),r.a.createElement("div",{className:"Search-input-container"},r.a.createElement("input",{type:"text",className:"Search-input",onChange:this.onSearchInputHandler,placeholder:"Wyszukaj...",name:"query",id:"query"}),r.a.createElement("button",{type:"submit"},"Szukaj"))))))}}]),t}(r.a.Component)),he={filterPosts:function(e){return{filters:e,type:O}}},be=Object(i.b)(function(e){return{}},he)(fe);n(50);var ve=function(e){function t(){var e,n;Object(Z.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).onClickBtn=function(){n.props.onClick(n.props.id)},n}return Object($.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.label,a=e.order,o=e.orderBy;return r.a.createElement("div",{className:"SortMenu-elem"},r.a.createElement("div",{className:"SortMenu-sort"},r.a.createElement("button",{className:"Button-link",onClick:this.onClickBtn},r.a.createElement("span",null,n)),o===t&&r.a.createElement("span",{className:"Sort-arrow"},"asc"===a?"\u2191":"\u2193")),r.a.createElement("div",null,"|"))}}]),t}(r.a.Component),ge=[{id:"id",label:"Ostatnie"},{id:"title",label:"Tytu\u0142"},{id:"favorite",label:"Ulubione"}],Ee=function(e){function t(){var e,n;Object(Z.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).onClickBtn=function(e){n.props.onClick(e)},n}return Object($.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.order,a=t.orderBy;return r.a.createElement("div",{className:"SortMenu-sort-container"},r.a.createElement("p",null,"Sortuj wg:"),ge.map(function(t){return r.a.createElement(ve,{key:t.id,id:t.id,label:t.label,onClick:e.onClickBtn,order:n,orderBy:a})}))}}]),t}(r.a.Component),ye=function(e){function t(){var e,n;Object(Z.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={currentPage:1,postPerPage:10,orderBy:"id",order:"asc"},n.getPosts=function(){n.props.getPostsDataRequested()},n.handleChangePage=function(e){n.setState({currentPage:Number(e.target.id)})},n.sortData=function(e){n.setState(function(t){return Object(Q.a)({},t,{orderBy:e,order:"asc"===t.order?"desc":"asc"})},function(){n.props.sortPostsByParam(n.state.order,n.state.orderBy)})},n}return Object($.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var e=this,t=this.props.data,n=this.state,a=n.postPerPage,o=n.currentPage,c=function(e,t,n){var a=n*t,r=a-t;return e.slice(r,a)}(t.list,a,o);return r.a.createElement("div",{className:"List-container"},t.loading?r.a.createElement("p",null,"\u0141adowanie danych ..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PostList-filter-container"},r.a.createElement(Ee,{order:this.state.order,orderBy:this.state.orderBy,onClick:this.sortData}),r.a.createElement(be,null)),r.a.createElement("ul",{className:"list"},t.list.length>0?r.a.createElement(r.a.Fragment,null,c.map(function(e){return r.a.createElement(de,{key:e.id,data:e})})):r.a.createElement("li",null,"Brak post\xf3w spe\u0142niaj\u0105cych kryteria filtrowania.")),r.a.createElement("ul",{className:"pagination"},r.a.createElement(pe,{rowsPerPage:a,onChangePage:function(t){return e.handleChangePage(t)},count:t.list.length,page:o}))))}}]),t}(r.a.Component),Oe={getPostsDataRequested:function(){return{type:l}},sortPostsByParam:function(e,t){return{order:e,orderBy:t,type:y}}},je=Object(i.b)(function(e){return{data:ne(e)}},Oe)(ye),ke=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(K,null),r.a.createElement(je,null))};n(51).config(),c.a.render(r.a.createElement(i.a,{store:U},r.a.createElement(ke,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.db4b1a79.chunk.js.map